'use strict';Object.defineProperty(exports, "__esModule", { value: true });exports.querystringify = exports.getSanitizedHostname = exports.withoutNilValues = exports.isOfQueryStringType = exports.maybeStringify = exports.tryJsonStringify = exports.tryJsonParse = exports.tryCatchReturn = undefined;var _stringify = require('babel-runtime/core-js/json/stringify');var _stringify2 = _interopRequireDefault(_stringify);var _mapValues2 = require('lodash/fp/mapValues');var _mapValues3 = _interopRequireDefault(_mapValues2);var _toPairs2 = require('lodash/fp/toPairs');var _toPairs3 = _interopRequireDefault(_toPairs2);var _map2 = require('lodash/fp/map');var _map3 = _interopRequireDefault(_map2);var _join2 = require('lodash/fp/join');var _join3 = _interopRequireDefault(_join2);var _getOr2 = require('lodash/fp/getOr');var _getOr3 = _interopRequireDefault(_getOr2);var _trim2 = require('lodash/fp/trim');var _trim3 = _interopRequireDefault(_trim2);var _replace2 = require('lodash/fp/replace');var _replace3 = _interopRequireDefault(_replace2);var _compose2 = require('lodash/fp/compose');var _compose3 = _interopRequireDefault(_compose2);var _isNil2 = require('lodash/fp/isNil');var _isNil3 = _interopRequireDefault(_isNil2);var _negate2 = require('lodash/fp/negate');var _negate3 = _interopRequireDefault(_negate2);var _pickBy2 = require('lodash/fp/pickBy');var _pickBy3 = _interopRequireDefault(_pickBy2);var _isNumber2 = require('lodash/isNumber');var _isNumber3 = _interopRequireDefault(_isNumber2);var _isString2 = require('lodash/isString');var _isString3 = _interopRequireDefault(_isString2);var _isObject2 = require('lodash/isObject');var _isObject3 = _interopRequireDefault(_isObject2);function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}








/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * Attempts to invoke `method` with `args` and returns
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * `fallback` if an error is thrown.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * @param {function} method The method to try.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * @param {any} fallback The fallback value to return.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * @param {...nany} args The arguments to pass to `method`.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            */ /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Utility methods.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @since 5/10/18
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */var tryCatchReturn = exports.tryCatchReturn = function tryCatchReturn(method, fallback) {for (var _len = arguments.length, args = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {args[_key - 2] = arguments[_key];}try {return method.apply(undefined, args);} catch (e) {
    return fallback;
  }
};

/**
    * Attempt to execute JSON.parse on value. If JSON.parse fails, value is returned as given.
    * @param {any} value The value to attempt to parse.
    * @returns {any} The input value, or the parsed value.
    */
var tryJsonParse = exports.tryJsonParse = function tryJsonParse(value) {return tryCatchReturn(JSON.parse, value, value);};

/**
                                                                                                                            * Attempt to execute JSON.stringify on value. If JSON.stringify fails, value is returned as given.
                                                                                                                            * @param {any} value The value to attempt to stringify.
                                                                                                                            * @returns {any} The input value, or the stringified value.
                                                                                                                            */
var tryJsonStringify = exports.tryJsonStringify = function tryJsonStringify(value) {return tryCatchReturn(_stringify2.default, value, value);};

/**
                                                                                                                                                 * Stringifies objects only, leaves other values untouched.
                                                                                                                                                 * @param {Object|string} value The value to maybe stringify.
                                                                                                                                                 * @returns {string} The original string input value, or the stringified value.
                                                                                                                                                 */
var maybeStringify = exports.maybeStringify = function maybeStringify(value) {return (0, _isObject3.default)(value) ? (0, _stringify2.default)(value) : value;};

/**
                                                                                                                                                                  * Used to omit non-string, non-numeric, and non-object values from querystrings.
                                                                                                                                                                  * @param {any} value The value to inspect.
                                                                                                                                                                  * @returns {boolean} True if the value is a valid querystring value, false otherwise.
                                                                                                                                                                  */
var isOfQueryStringType = exports.isOfQueryStringType = function isOfQueryStringType(value) {return (0, _isString3.default)(value) ||
  (0, _isNumber3.default)(value) ||
  (0, _isObject3.default)(value);};

/**
                                     * Removes nil values from objects.
                                     * @function
                                     */
var withoutNilValues = exports.withoutNilValues = (0, _pickBy3.default)((0, _negate3.default)(_isNil3.default));

/**
                                                                                                                  * Gets the hostname from an object and sanitizes it for use with [node-]fetch.
                                                                                                                  * @function
                                                                                                                  */
var getSanitizedHostname = exports.getSanitizedHostname = (0, _compose3.default)(
(0, _replace3.default)(/\/$/, ''), _trim3.default,

(0, _getOr3.default)('', 'host'));


/**
                                    * Converts an object to a querystring.
                                    * This differs from querystring.stringify in that it
                                    * automatically JSON.stringify's object values.
                                    * @function
                                    */
var querystringify = exports.querystringify = (0, _compose3.default)(
function (querystring) {return querystring ? '?' + querystring : '';},
(0, _join3.default)('&'),
(0, _map3.default)((0, _join3.default)('=')), _toPairs3.default,

(0, _mapValues3.default)(encodeURIComponent),
(0, _mapValues3.default)(maybeStringify),
(0, _pickBy3.default)(isOfQueryStringType));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy91dGlscy5qcyJdLCJuYW1lcyI6WyJ0cnlDYXRjaFJldHVybiIsIm1ldGhvZCIsImZhbGxiYWNrIiwiYXJncyIsImUiLCJ0cnlKc29uUGFyc2UiLCJKU09OIiwicGFyc2UiLCJ2YWx1ZSIsInRyeUpzb25TdHJpbmdpZnkiLCJtYXliZVN0cmluZ2lmeSIsImlzT2ZRdWVyeVN0cmluZ1R5cGUiLCJ3aXRob3V0TmlsVmFsdWVzIiwiZ2V0U2FuaXRpemVkSG9zdG5hbWUiLCJxdWVyeXN0cmluZ2lmeSIsInF1ZXJ5c3RyaW5nIiwiZW5jb2RlVVJJQ29tcG9uZW50Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFTQTs7Ozs7Oyt2REFUQTs7Oztrd0RBZ0JPLElBQU1BLDBDQUFpQixTQUFqQkEsY0FBaUIsQ0FBQ0MsTUFBRCxFQUFTQyxRQUFULEVBQStCLG1DQUFUQyxJQUFTLG1FQUFUQSxJQUFTLDhCQUMzRCxJQUFJLENBQ0YsT0FBT0Ysd0JBQVVFLElBQVYsQ0FBUCxDQUNELENBRkQsQ0FFRSxPQUFPQyxDQUFQLEVBQVU7QUFDVixXQUFPRixRQUFQO0FBQ0Q7QUFDRixDQU5NOztBQVFQOzs7OztBQUtPLElBQU1HLHNDQUFlLFNBQWZBLFlBQWUsZ0JBQVNMLGVBQWVNLEtBQUtDLEtBQXBCLEVBQTJCQyxLQUEzQixFQUFrQ0EsS0FBbEMsQ0FBVCxFQUFyQjs7QUFFUDs7Ozs7QUFLTyxJQUFNQyw4Q0FBbUIsU0FBbkJBLGdCQUFtQixnQkFBU1Qsb0NBQStCUSxLQUEvQixFQUFzQ0EsS0FBdEMsQ0FBVCxFQUF6Qjs7QUFFUDs7Ozs7QUFLTyxJQUFNRSwwQ0FBaUIsU0FBakJBLGNBQWlCLGdCQUFVLHdCQUFXRixLQUFYLElBQW9CLHlCQUFlQSxLQUFmLENBQXBCLEdBQTRDQSxLQUF0RCxFQUF2Qjs7QUFFUDs7Ozs7QUFLTyxJQUFNRyxvREFBc0IsU0FBdEJBLG1CQUFzQixnQkFBUyx3QkFBV0gsS0FBWDtBQUN2QywwQkFBV0EsS0FBWCxDQUR1QztBQUV2QywwQkFBV0EsS0FBWCxDQUY4QixFQUE1Qjs7QUFJUDs7OztBQUlPLElBQU1JLDhDQUFtQixzQkFBVSxzQ0FBVixDQUF6Qjs7QUFFUDs7OztBQUlPLElBQU1DLHNEQUF1QjtBQUNsQyx1QkFBVyxLQUFYLEVBQWtCLEVBQWxCLENBRGtDOztBQUdsQyxxQkFBUyxFQUFULEVBQWEsTUFBYixDQUhrQyxDQUE3Qjs7O0FBTVA7Ozs7OztBQU1PLElBQU1DLDBDQUFpQjtBQUM1QiwrQkFBZ0JDLG9CQUFrQkEsV0FBbEIsR0FBa0MsRUFBbEQsRUFENEI7QUFFNUIsb0JBQVEsR0FBUixDQUY0QjtBQUc1QixtQkFBTyxvQkFBUSxHQUFSLENBQVAsQ0FINEI7O0FBSzVCLHlCQUFhQyxrQkFBYixDQUw0QjtBQU01Qix5QkFBYU4sY0FBYixDQU40QjtBQU81QixzQkFBVUMsbUJBQVYsQ0FQNEIsQ0FBdkIiLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFV0aWxpdHkgbWV0aG9kcy5cbiAqIEBzaW5jZSA1LzEwLzE4XG4gKiBAZmlsZVxuICovXG5cbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgZnAgZnJvbSAnbG9kYXNoL2ZwJztcblxuLyoqXG4gKiBBdHRlbXB0cyB0byBpbnZva2UgYG1ldGhvZGAgd2l0aCBgYXJnc2AgYW5kIHJldHVybnNcbiAqIGBmYWxsYmFja2AgaWYgYW4gZXJyb3IgaXMgdGhyb3duLlxuICogQHBhcmFtIHtmdW5jdGlvbn0gbWV0aG9kIFRoZSBtZXRob2QgdG8gdHJ5LlxuICogQHBhcmFtIHthbnl9IGZhbGxiYWNrIFRoZSBmYWxsYmFjayB2YWx1ZSB0byByZXR1cm4uXG4gKiBAcGFyYW0gey4uLm5hbnl9IGFyZ3MgVGhlIGFyZ3VtZW50cyB0byBwYXNzIHRvIGBtZXRob2RgLlxuICovXG5leHBvcnQgY29uc3QgdHJ5Q2F0Y2hSZXR1cm4gPSAobWV0aG9kLCBmYWxsYmFjaywgLi4uYXJncykgPT4ge1xuICB0cnkge1xuICAgIHJldHVybiBtZXRob2QoLi4uYXJncyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsbGJhY2s7XG4gIH1cbn07XG5cbi8qKlxuICogQXR0ZW1wdCB0byBleGVjdXRlIEpTT04ucGFyc2Ugb24gdmFsdWUuIElmIEpTT04ucGFyc2UgZmFpbHMsIHZhbHVlIGlzIHJldHVybmVkIGFzIGdpdmVuLlxuICogQHBhcmFtIHthbnl9IHZhbHVlIFRoZSB2YWx1ZSB0byBhdHRlbXB0IHRvIHBhcnNlLlxuICogQHJldHVybnMge2FueX0gVGhlIGlucHV0IHZhbHVlLCBvciB0aGUgcGFyc2VkIHZhbHVlLlxuICovXG5leHBvcnQgY29uc3QgdHJ5SnNvblBhcnNlID0gdmFsdWUgPT4gdHJ5Q2F0Y2hSZXR1cm4oSlNPTi5wYXJzZSwgdmFsdWUsIHZhbHVlKTtcblxuLyoqXG4gKiBBdHRlbXB0IHRvIGV4ZWN1dGUgSlNPTi5zdHJpbmdpZnkgb24gdmFsdWUuIElmIEpTT04uc3RyaW5naWZ5IGZhaWxzLCB2YWx1ZSBpcyByZXR1cm5lZCBhcyBnaXZlbi5cbiAqIEBwYXJhbSB7YW55fSB2YWx1ZSBUaGUgdmFsdWUgdG8gYXR0ZW1wdCB0byBzdHJpbmdpZnkuXG4gKiBAcmV0dXJucyB7YW55fSBUaGUgaW5wdXQgdmFsdWUsIG9yIHRoZSBzdHJpbmdpZmllZCB2YWx1ZS5cbiAqL1xuZXhwb3J0IGNvbnN0IHRyeUpzb25TdHJpbmdpZnkgPSB2YWx1ZSA9PiB0cnlDYXRjaFJldHVybihKU09OLnN0cmluZ2lmeSwgdmFsdWUsIHZhbHVlKTtcblxuLyoqXG4gKiBTdHJpbmdpZmllcyBvYmplY3RzIG9ubHksIGxlYXZlcyBvdGhlciB2YWx1ZXMgdW50b3VjaGVkLlxuICogQHBhcmFtIHtPYmplY3R8c3RyaW5nfSB2YWx1ZSBUaGUgdmFsdWUgdG8gbWF5YmUgc3RyaW5naWZ5LlxuICogQHJldHVybnMge3N0cmluZ30gVGhlIG9yaWdpbmFsIHN0cmluZyBpbnB1dCB2YWx1ZSwgb3IgdGhlIHN0cmluZ2lmaWVkIHZhbHVlLlxuICovXG5leHBvcnQgY29uc3QgbWF5YmVTdHJpbmdpZnkgPSB2YWx1ZSA9PiAoXy5pc09iamVjdCh2YWx1ZSkgPyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkgOiB2YWx1ZSk7XG5cbi8qKlxuICogVXNlZCB0byBvbWl0IG5vbi1zdHJpbmcsIG5vbi1udW1lcmljLCBhbmQgbm9uLW9iamVjdCB2YWx1ZXMgZnJvbSBxdWVyeXN0cmluZ3MuXG4gKiBAcGFyYW0ge2FueX0gdmFsdWUgVGhlIHZhbHVlIHRvIGluc3BlY3QuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgYSB2YWxpZCBxdWVyeXN0cmluZyB2YWx1ZSwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5leHBvcnQgY29uc3QgaXNPZlF1ZXJ5U3RyaW5nVHlwZSA9IHZhbHVlID0+IF8uaXNTdHJpbmcodmFsdWUpXG4gIHx8IF8uaXNOdW1iZXIodmFsdWUpXG4gIHx8IF8uaXNPYmplY3QodmFsdWUpO1xuXG4vKipcbiAqIFJlbW92ZXMgbmlsIHZhbHVlcyBmcm9tIG9iamVjdHMuXG4gKiBAZnVuY3Rpb25cbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhvdXROaWxWYWx1ZXMgPSBmcC5waWNrQnkoZnAubmVnYXRlKGZwLmlzTmlsKSk7XG5cbi8qKlxuICogR2V0cyB0aGUgaG9zdG5hbWUgZnJvbSBhbiBvYmplY3QgYW5kIHNhbml0aXplcyBpdCBmb3IgdXNlIHdpdGggW25vZGUtXWZldGNoLlxuICogQGZ1bmN0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRTYW5pdGl6ZWRIb3N0bmFtZSA9IGZwLmNvbXBvc2UoXG4gIGZwLnJlcGxhY2UoL1xcLyQvLCAnJyksXG4gIGZwLnRyaW0sXG4gIGZwLmdldE9yKCcnLCAnaG9zdCcpLFxuKTtcblxuLyoqXG4gKiBDb252ZXJ0cyBhbiBvYmplY3QgdG8gYSBxdWVyeXN0cmluZy5cbiAqIFRoaXMgZGlmZmVycyBmcm9tIHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeSBpbiB0aGF0IGl0XG4gKiBhdXRvbWF0aWNhbGx5IEpTT04uc3RyaW5naWZ5J3Mgb2JqZWN0IHZhbHVlcy5cbiAqIEBmdW5jdGlvblxuICovXG5leHBvcnQgY29uc3QgcXVlcnlzdHJpbmdpZnkgPSBmcC5jb21wb3NlKFxuICBxdWVyeXN0cmluZyA9PiAocXVlcnlzdHJpbmcgPyBgPyR7cXVlcnlzdHJpbmd9YCA6ICcnKSxcbiAgZnAuam9pbignJicpLFxuICBmcC5tYXAoZnAuam9pbignPScpKSxcbiAgZnAudG9QYWlycyxcbiAgZnAubWFwVmFsdWVzKGVuY29kZVVSSUNvbXBvbmVudCksXG4gIGZwLm1hcFZhbHVlcyhtYXliZVN0cmluZ2lmeSksXG4gIGZwLnBpY2tCeShpc09mUXVlcnlTdHJpbmdUeXBlKSxcbik7XG4iXX0=